<!DOCTYPE html>
<html>
<head>
<title>WORD COUNT</title>

<style>
table {
    border-collapse: collapse;
    margin: 10px;
}

table, td, th {
    border: 1px solid black;
}

td{
	min-width: 100px;
}

</style>

<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
<script type="text/javascript">
 

$(document).ready(function() {
	var worker = new Worker('word_count_worker.js');
	
	worker.addEventListener('message', function(e) {
		var wc = e.data;
        display(wc);
		//console.log('Worker said: ', e.data);
	}, false);

    $("#count").click(function() {

		var txt = $("#message").val();

        if (txt.trim().length == 0){
        	$("#err_results").html('Please provide a text first!');
        }else{
        	worker.postMessage(txt);
        }
    });
});




function display(wc){
	var tbl = $("#tbl_results");
	// clear the table and the error message
	tbl.html('');
	$("#err_results").html('');
	// get object keys = unique words
	unique_words = Object.keys(wc);
	
	$('<tr><th>Word</th><th>Count</th></tr>').appendTo(tbl); 

	//unique_words.sort(); 
	for (i = 0; i < unique_words.length; i ++){
		var word = unique_words[i];
		//get the number of occurrences for the word
		var count = wc[word];

		// create a row
		var row = $('<tr></tr>').appendTo(tbl); 

		// create a column for word
		$('<td></td>').text(word).appendTo(row); 
		// create a column for the counter
		$('<td></td>').text(count).appendTo(row); 
	}
}
  
</script>
</head>
  
<body>
  
<div> 
	<p>Writte your text to count words!</p>
	<textarea id="message" name="message" rows="20" cols="50"></textarea> </br>
	<button id="count">Count</button>
</div>

<br/>

<div id="result">
	<div id="err_results"></div>
	<table id="tbl_results">
	</table>
</div>

  
</body>
</html>